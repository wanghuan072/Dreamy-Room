<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>路由测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .route-test {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .route-test a {
            display: inline-block;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin-right: 10px;
        }
        .route-test a:hover {
            background-color: #0056b3;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }
        .status.unknown {
            background-color: #f8f9fa;
            color: #6c757d;
        }
        .status.working {
            background-color: #d4edda;
            color: #155724;
        }
        .status.broken {
            background-color: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <h1>🧪 路由测试页面</h1>
    <p>点击下面的链接测试各个路由是否正常工作：</p>

    <div class="route-test">
        <strong>首页:</strong>
        <a href="/" target="_blank">测试首页</a>
        <span class="status unknown" id="status-home">未测试</span>
    </div>

    <div class="route-test">
        <strong>关卡页面:</strong>
        <a href="/levels" target="_blank">测试关卡页面</a>
        <span class="status unknown" id="status-levels">未测试</span>
    </div>

    <div class="route-test">
        <strong>下载页面:</strong>
        <a href="/download" target="_blank">测试下载页面</a>
        <span class="status unknown" id="status-download">未测试</span>
    </div>

    <div class="route-test">
        <strong>博客页面:</strong>
        <a href="/blog" target="_blank">测试博客页面</a>
        <span class="status unknown" id="status-blog">未测试</span>
    </div>

    <div class="route-test">
        <strong>站点地图管理:</strong>
        <a href="/admin/sitemap" target="_blank">测试站点地图管理</a>
        <span class="status unknown" id="status-sitemap">未测试</span>
        <button onclick="testRoute('/admin/sitemap', 'status-sitemap')" style="margin-left: 10px;">自动测试</button>
    </div>

    <div class="route-test">
        <strong>关于我们:</strong>
        <a href="/about-us" target="_blank">测试关于我们</a>
        <span class="status unknown" id="status-about">未测试</span>
    </div>

    <div class="route-test">
        <strong>联系我们:</strong>
        <a href="/contact-us" target="_blank">测试联系我们</a>
        <span class="status unknown" id="status-contact">未测试</span>
    </div>

    <hr>

    <h2>🔗 API 端点测试</h2>

    <div class="route-test">
        <strong>XML 站点地图:</strong>
        <a href="/api/sitemap" target="_blank">查看 XML</a>
        <button onclick="testAPI('/api/sitemap', 'status-xml')">测试 API</button>
        <span class="status unknown" id="status-xml">未测试</span>
    </div>

    <div class="route-test">
        <strong>JSON 站点地图:</strong>
        <a href="/api/sitemap-json" target="_blank">查看 JSON</a>
        <button onclick="testAPI('/api/sitemap-json', 'status-json')">测试 API</button>
        <span class="status unknown" id="status-json">未测试</span>
    </div>

    <hr>

    <h2>📊 测试结果</h2>
    <div id="test-results"></div>

    <script>
        async function testRoute(url, statusId) {
            const statusEl = document.getElementById(statusId);
            statusEl.textContent = '测试中...';
            statusEl.className = 'status unknown';

            try {
                const response = await fetch(url);
                if (response.ok) {
                    statusEl.textContent = '正常';
                    statusEl.className = 'status working';
                } else {
                    statusEl.textContent = `错误 ${response.status}`;
                    statusEl.className = 'status broken';
                }
            } catch (error) {
                statusEl.textContent = '连接失败';
                statusEl.className = 'status broken';
            }
        }

        async function testAPI(url, statusId) {
            const statusEl = document.getElementById(statusId);
            statusEl.textContent = '测试中...';
            statusEl.className = 'status unknown';

            try {
                const response = await fetch(url);
                if (response.ok) {
                    const contentType = response.headers.get('content-type');
                    statusEl.textContent = `正常 (${contentType})`;
                    statusEl.className = 'status working';
                } else {
                    statusEl.textContent = `错误 ${response.status}`;
                    statusEl.className = 'status broken';
                }
            } catch (error) {
                statusEl.textContent = '连接失败';
                statusEl.className = 'status broken';
            }
        }

        // 自动测试所有API
        setTimeout(() => {
            testAPI('/api/sitemap-json', 'status-json');
            testAPI('/api/sitemap', 'status-xml');
        }, 1000);
    </script>
</body>
</html>